create table emp(
    EMPCODE number(3) CONSTRAINT PK_EMPNO PRIMARY KEY,
    NAME varchar2(10),
    QUALIFICATION varchar2(10) CONSTRAINT VALID_QUALIF CHECK(QUALIFICATION in ('BTECH',
'MTECH','MSC','MCA','PHD')),
    PHONE number(10),
    EMAIL varchar2(20) CONSTRAINT EMAIL_DOMAIN CHECK(EMAIL like('%@digisol.com')),
    DESIGNATION varchar2(20) CONSTRAINT VALID_DESIGNATION CHECK(DESIGNATION in ('DEVELOPER',
'PROJECT LEADER','PROJECT MANAGER','TECHNICAL HEAD','PROJECT DIRECTOR','PROJECT DIRECTOR',
'CEO')),
    SALARY number(7) CONSTRAINT SALARY_RANGE CHECK(SALARY between 97000 and 300000));

create table skill(
SKILLID char(3) CONSTRAINT UNQ_SKILLID UNIQUE,
SKILLNAME varchar(20) CONSTRAINT UNQSKILNAME UNIQUE);

create table emp_skill(
EMPNO number(3) CONSTRAINT FK_EMPNO references EMP,
SKILLID char(3) CONSTRAINT FK_SKILLID references SKILL(SKILLID) ON DELETE CASCADE,
SKILL_EXPERIENCE number(3) CHECK(SKILL_EXPERIENCE>0));

create table PRJ_DETAILS(
PRJID char(3) check (PRJID like 'p%') CONSTRAINT PK_PRJID PRIMARY KEY,
PRJ_NAME varchar2(10),
START_DATE date,
END_DATE date,
ACTUAL_END_DATE date ,
LEAD_BY_EMPCODE CONSTRAINT FK_LEAD_EMP REFERENCES emp,
BUDGET_ALLOCATED NUMBER(10,1),
ACTUAL_BUDGET NUMBER(10,1),
CONSTRAINT END_DATE_GREATER_START_DATE check(END_DATE>START_DATE),
CONSTRAINT ACT_GREATER_END check(ACTUAL_END_DATE>=END_DATE));

CREATE TABLE FAMILY_DEPENDENTS(
EMPNO NUMBER(3) REFERENCES emp,
DEP_NAME VARCHAR(20),
RELATIONSHIP VARCHAR(16),
AGE NUMBER(3) CONSTRAINT VALID_AGE CHECK(AGE BETWEEN 1 AND 130),
PRIMARY KEY(EMPNO,DEP_NAME));

CREATE TABLE MEDICAL_POLICY(
EMPNO NUMBER(3) references emp,
POLICYNO VARCHAR2(6) CONSTRAINT POLINO CHECK(POLICYNO LIKE 'MED___'),
PREMIUM NUMBER(5) CONSTRAINT PREMNO CHECK(PREMIUM>0),
POLICYDATE DATE,
PRIMARY KEY(EMPNO, POLICYNO));

CREATE TABLE PAY_CHECK(
EMPCODE NUMBER(3) REFERENCES EMP,
PAY_DATE DATE,
REGULAR_INCREMENT NUMBER(4) CONSTRAINT VALID_REGU_INCENTIVE CHECK(REGULAR_INCREMENT IN (2000,3000,5000,7000,9000)),
PERFORMANCE_INCENTIVE NUMBER(5),
DA NUMBER(7),
PF NUMBER(6),
OTHER_INCENTIVES NUMBER(4),
ADVANCE_TAX NUMBER(5),
PRIMARY KEY(EMPCODE,PAY_DATE));

CREATE TABLE CLIENT(
CLIENTID CHAR(3) CONSTRAINT PK_CLIENTID PRIMARY KEY CONSTRAINT STRTSWITH_C CHECK(CLIENTID LIKE 'C__'),
NAME VARCHAR2(10),
PHONE CHAR(14) CONSTRAINT PHONE_FORMAT CHECK(PHONE LIKE '+91-__________' OR PHONE LIKE '+81-__________' OR PHONE LIKE '+31-__________'
OR PHONE LIKE '+48-__________' OR PHONE LIKE '+44-__________'));


CREATE TABLE WORK_EXP(
EMPCODE NUMBER(3) REFERENCES EMP,
PRJID CHAR(3) REFERENCES PRJ_DETAILS,
WORK_EXPERIENCE NUMBER(3) CHECK(WORK_EXPERIENCE>=0) NOT NULL,
CLIENTID CHAR(3) REFERENCES CLIENT ON DELETE SET NULL,
RATING CHAR(1) CONSTRAINT RAT CHECK(RATING IN('A','B','C'))); 


